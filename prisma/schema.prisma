generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Users {
  id String @id() @default(uuid())
  username String
  email String @unique
  password String
  token String?
  refresh_token String?
  created_at DateTime @default(now())
  updated_at DateTime @default(now())
  projects_member UserMemberOfProjects[]
  projects_author Projects[]
}

model Projects {
  id String @id() @default(uuid())
  name String
  description String
  start_date DateTime?
  observations String?
  started Boolean?
  delivery_date DateTime?
  status String?
  category String?
  created_at DateTime @default(now())
  updated_at DateTime @default(now())
  members UserMemberOfProjects[]
  author Users @relation(fields: [author_id], references: [id], onDelete: Cascade)
  author_id String

  @@unique([author_id, name])
}

model UserMemberOfProjects {
  user Users @relation(fields: [user_id], references: [id], onDelete: Cascade)
  user_id String
  project Projects @relation(fields: [project_id], references: [id], onDelete: Cascade)
  project_id String

  @@id([user_id, project_id])
}
